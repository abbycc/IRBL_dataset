fshlog deadlock rollwrit call ring buffer fill append recent experienc onlin problem handler stuck check jstack handler thread wait ringbuff singl ring buffer consum dead wait safepointreleasedlatch count handler thread defaultrpcserv handler 126 queue 9 port 16020 daemon prio 10 tid 0x00007efd4b44f800 nid 0x15f29 runnabl 0x00007efd3db7b000 java lang thread state time wait park sun misc unsaf park nativ method java util concurr lock locksupport parknano locksupport java 349 lmax disruptor multiproducersequenc multiproducersequenc java 136 lmax disruptor multiproducersequenc multiproducersequenc java 105 lmax disruptor ringbuff ringbuff java 246 org apach hadoop hbase regionserv wal fshlog append fshlog java 1222 org apach hadoop hbase regionserv hregion dominibatchmut hregion java 3188 org apach hadoop hbase regionserv hregion batchmut hregion java 2879 org apach hadoop hbase regionserv hregion batchmut hregion java 2819 org apach hadoop hbase regionserv rsrpcservic dobatchop rsrpcservic java 736 org apach hadoop hbase regionserv rsrpcservic dononatomicregionmut rsrpcservic java 698 org apach hadoop hbase regionserv rsrpcservic multi rsrpcservic java 2095 org apach hadoop hbase protobuf gener clientproto clientservic 2 callblockingmethod clientproto java 32213 org apach hadoop hbase ipc rpcserver call rpcserver java 774 org apach hadoop hbase ipc callrunn run callrunn java 102 org apach hadoop hbase ipc rpcexecutor consumerloop rpcexecutor java 133 org apach hadoop hbase ipc rpcexecutor 1 run rpcexecutor java 108 java lang thread run thread java 756 ringbuffereventhandl thread wait safepointreleasedlatch regionserv hadoop0369 et2 tbsite net 11 251 152 226 16020 append pool2 t1 prio 10 tid 0x00007efd320d0000 nid 0x1777b wait condit 0x00007efd2d2fa000 java lang thread state wait park sun misc unsaf park nativ method park wait lt 0x00007f01b48d9178 gt java util concurr countdownlatch sync java util concurr lock locksupport park locksupport java 186 java util concurr lock abstractqueuedsynchron parkandcheckinterrupt abstractqueuedsynchron java 834 java util concurr lock abstractqueuedsynchron doacquiresharedinterrupt abstractqueuedsynchron java 994 java util concurr lock abstractqueuedsynchron acquiresharedinterrupt abstractqueuedsynchron java 1303 java util concurr countdownlatch await countdownlatch java 236 org apach hadoop hbase regionserv wal fshlog safepointzigzaglatch safepointattain fshlog java 1866 org apach hadoop hbase regionserv wal fshlog ringbuffereventhandl attainsafepoint fshlog java 2066 org apach hadoop hbase regionserv wal fshlog ringbuffereventhandl onev fshlog java 2029 org apach hadoop hbase regionserv wal fshlog ringbuffereventhandl onev fshlog java 1909 lmax disruptor batcheventprocessor run batcheventprocessor java 128 java util concurr threadpoolexecutor runwork threadpoolexecutor java 1145 java util concurr threadpoolexecutor worker run threadpoolexecutor java 615 java lang thread run thread java 756 fshlog replacewrit call safepointzigzaglatch releasesafepoint count safepointreleasedlatch replacewrit stuck publish sync ring buffer regionserv hadoop0369 et2 tbsite net 11 251 152 226 16020 logrol daemon prio 10 tid 0x00007efd320c8800 nid 0x16123 runnabl 0x00007efd311f6000 java lang thread state time wait park sun misc unsaf park nativ method java util concurr lock locksupport parknano locksupport java 349 lmax disruptor multiproducersequenc multiproducersequenc java 136 lmax disruptor multiproducersequenc multiproducersequenc java 105 lmax disruptor ringbuff ringbuff java 246 org apach hadoop hbase regionserv wal fshlog publishsynconringbuff fshlog java 1481 org apach hadoop hbase regionserv wal fshlog publishsynconringbuff fshlog java 1477 org apach hadoop hbase regionserv wal fshlog replacewrit fshlog java 957 org apach hadoop hbase regionserv wal fshlog rollwrit fshlog java 726 org apach hadoop hbase regionserv logrol run logrol java 148 java lang thread run thread java 756 deadlock process deadlock form ring buffer fill append gt rollwrit gt consum ring buffer wait safepointreleasedlatch gt rollwrit publish sync ring buffer full gt rollwrit won amp apo releas safepointreleasedlatch jira target resolv issu add ut cover case