race compact file delet hstore close closeandarchivecompactedfil hbase 13082 compact file archiv inlin compact complet async cleanup compactedhfilesdischarg chore hstore support introduc race condit compact hfile archiv sequenc wind separ thread archiv hfile regionserv abort compact complet compact file ad compactedfil hstore amp apo defaultstorefilemanag threada compactedhfilesdischargehandl run rs executor servic call closeandarchivecompactedfil obtain hstore readlock copi compactedfil releas readlock threadb call hstore close part region close obtain hstore writelock call defaultstorefilemanag clearcompactedfil copi compactedfil threada call hstore removecompactedfil compactedfil archiv file compactedfil hregionfilesystem removestorefil call hstore clearcompactedfil wait write lock threadb continu close call removecompactedfil compactedfil call hregionfilesystem removestorefil gt hfilearchiv archivestorefil receiv filenotfoundexcept file archiv threada throw ioexcept rs abort combin fetch compactedfil list remov file cover lock option modifi hstore closeandarchivecompactedfil writelock readlock move call removecompactedfil insid lock read oper block file archiv bad synchron closeandarchivecompactedfil modifi close call call removecompactedfil directli add separ lock compact file remov closeandarchivecompactedfil close