avoid npe metricsconnect construct batch pool assign connectionimpl construct meta pool null connectionimpl construct outlin npe metricsconnect construct final threadpoolexecutor batchpool threadpoolexecutor conn getcurrentbatchpool final threadpoolexecutor metapool threadpoolexecutor conn getcurrentmetalookuppool registri regist getclass executorpoolactivethread scope ratiogaug overrid protect ratio getratio return ratio batchpool getactivecount batchpool getmaximumpools registri regist getclass metapoolactivethread scope ratiogaug overrid protect ratio getratio return ratio metapool getactivecount metapool getmaximumpools