boundedbytebufferpool incorrectli increas runningaverag buffer length test hbase 13158 notic boundedbytebufferpool intial amp apo runningaverag amp apo default 16k pool make initi buffer size buffer grow bytebufferouputstream data written return back bb pool adjust amp apo runningaverag amp apo size capac return bb lack proper synchron make runningaverag grow till max 1 mb test pe tool randomread 20 client thread op return cell 1kb data default size bb creat pool 16k ideal room resiz 2015 05 26 20 12 21 965 info priorityrpcserv handler 5 queue 1 port 16020 io boundedbytebufferpool alloc bb runningaverag 16384 totalcapac 0 count 0 alloct 2 2015 05 26 20 12 21 966 info priorityrpcserv handler 2 queue 0 port 16020 io boundedbytebufferpool alloc bb runningaverag 16384 totalcapac 0 count 0 alloct 4 2015 05 26 20 12 21 966 info priorityrpcserv handler 8 queue 0 port 16020 io boundedbytebufferpool alloc bb runningaverag 16384 totalcapac 0 count 0 alloct 6 2015 05 26 20 12 21 966 info priorityrpcserv handler 12 queue 0 port 16020 io boundedbytebufferpool alloc bb runningaverag 16384 totalcapac 0 count 0 alloct 9 2015 05 26 20 12 21 966 info priorityrpcserv handler 13 queue 1 port 16020 io boundedbytebufferpool alloc bb runningaverag 16384 totalcapac 0 count 0 alloct 10 2015 05 26 20 12 21 966 info priorityrpcserv handler 18 queue 0 port 16020 io boundedbytebufferpool alloc bb runningaverag 16384 totalcapac 0 count 0 alloct 12 2015 05 26 20 12 21 966 info priorityrpcserv handler 16 queue 0 port 16020 io boundedbytebufferpool alloc bb runningaverag 16384 totalcapac 0 count 0 alloct 14 2015 05 26 20 12 21 966 info priorityrpcserv handler 7 queue 1 port 16020 io boundedbytebufferpool alloc bb runningaverag 16384 totalcapac 0 count 0 alloct 5 2015 05 26 20 12 21 966 info priorityrpcserv handler 19 queue 1 port 16020 io boundedbytebufferpool alloc bb runningaverag 16384 totalcapac 0 count 0 alloct 15 2015 05 26 20 12 21 966 info priorityrpcserv handler 1 queue 1 port 16020 io boundedbytebufferpool alloc bb runningaverag 16384 totalcapac 0 count 0 alloct 4 2015 05 26 20 12 21 965 info priorityrpcserv handler 11 queue 1 port 16020 io boundedbytebufferpool alloc bb runningaverag 16384 totalcapac 0 count 0 alloct 2 2015 05 26 20 12 21 966 info priorityrpcserv handler 3 queue 1 port 16020 io boundedbytebufferpool alloc bb runningaverag 16384 totalcapac 0 count 0 alloct 13 2015 05 26 20 12 21 966 info priorityrpcserv handler 9 queue 1 port 16020 io boundedbytebufferpool alloc bb runningaverag 16384 totalcapac 0 count 0 alloct 11 2015 05 26 20 12 21 966 info priorityrpcserv handler 6 queue 0 port 16020 io boundedbytebufferpool alloc bb runningaverag 16384 totalcapac 0 count 0 alloct 8 2015 05 26 20 12 21 966 info priorityrpcserv handler 15 queue 1 port 16020 io boundedbytebufferpool alloc bb runningaverag 16384 totalcapac 0 count 0 alloct 7 2015 05 26 20 12 21 966 info priorityrpcserv handler 4 queue 0 port 16020 io boundedbytebufferpool alloc bb runningaverag 16384 totalcapac 0 count 0 alloct 16 2015 05 26 20 12 21 967 info priorityrpcserv handler 10 queue 0 port 16020 io boundedbytebufferpool alloc bb runningaverag 16384 totalcapac 0 count 0 alloct 17 2015 05 26 20 12 21 967 info priorityrpcserv handler 14 queue 0 port 16020 io boundedbytebufferpool alloc bb runningaverag 16384 totalcapac 0 count 0 alloct 19 2015 05 26 20 12 21 967 info priorityrpcserv handler 17 queue 1 port 16020 io boundedbytebufferpool alloc bb runningaverag 16384 totalcapac 0 count 0 alloct 18 2015 05 26 20 12 22 146 info priorityrpcserv handler 18 queue 0 port 16020 io boundedbytebufferpool alloc bb runningaverag 16384 totalcapac 16384 count 2 alloct 20 2015 05 26 20 12 22 707 info priorityrpcserv handler 9 queue 1 port 16020 io boundedbytebufferpool alloc bb runningaverag 212992 totalcapac 32768 count 4 alloct 21 2015 05 26 20 12 23 208 info priorityrpcserv handler 3 queue 1 port 16020 io boundedbytebufferpool alloc bb runningaverag 212992 totalcapac 81920 count 1 alloct 22 2015 05 26 20 12 29 567 info priorityrpcserv handler 0 queue 0 port 16020 io boundedbytebufferpool alloc bb runningaverag 234837 totalcapac 49152 count 6 alloct 23 2015 05 26 20 12 29 974 info priorityrpcserv handler 0 queue 0 port 16020 io boundedbytebufferpool alloc bb runningaverag 311296 totalcapac 442368 count 6 alloct 24 2015 05 26 20 12 31 356 info priorityrpcserv handler 7 queue 1 port 16020 io boundedbytebufferpool alloc bb runningaverag 606208 totalcapac 1054037 count 9 alloct 25 2015 05 26 20 12 31 894 info priorityrpcserv handler 3 queue 1 port 16020 io boundedbytebufferpool alloc bb runningaverag 901120 totalcapac 742741 count 1 alloct 26 2015 05 26 20 12 32 961 info priorityrpcserv handler 11 queue 1 port 16020 io boundedbytebufferpool alloc bb runningaverag 920234 totalcapac 2479445 count 12 alloct 27 2015 05 26 20 12 36 965 info priorityrpcserv handler 2 queue 0 port 16020 io boundedbytebufferpool alloc bb runningaverag 1037653 totalcapac 3836586 count 18 alloct 28 2015 05 26 20 12 42 212 info priorityrpcserv handler 6 queue 0 port 16020 io boundedbytebufferpool alloc bb runningaverag 1048120 totalcapac 11203921 count 12 alloct 29 2015 05 26 20 12 45 387 info priorityrpcserv handler 13 queue 1 port 16020 io boundedbytebufferpool alloc bb runningaverag 1048302 totalcapac 10174915 count 1 alloct 30 2015 05 26 20 12 46 171 info priorityrpcserv handler 1 queue 1 port 16020 io boundedbytebufferpool alloc bb runningaverag 1048302 totalcapac 14177342 count 7 alloct 31 2015 05 26 20 12 52 401 info priorityrpcserv handler 13 queue 1 port 16020 io boundedbytebufferpool alloc bb runningaverag 1048495 totalcapac 19454171 count 8 alloct 32 2015 05 26 20 12 52 541 info priorityrpcserv handler 2 queue 0 port 16020 io boundedbytebufferpool alloc bb runningaverag 1048495 totalcapac 16778574 count 1 alloct 33 2015 05 26 20 12 56 631 info priorityrpcserv handler 5 queue 1 port 16020 io boundedbytebufferpool alloc bb runningaverag 1048495 totalcapac 28925990 count 2 alloct 34 getbuff 1st line remov bb queue putbuff put back 1st line check size buffer time period thread buffer putbuff bytebuff bb int size buffer size size inexact totalreservoircapac bb capac int averag 0 size 0 averag totalreservoircapac size averag gt runningaverag amp amp averag lt maxbytebuffersizetocach runningaverag averag getbuff bytebuff bb buffer poll bb null clear set limit capac postion 0 bb clear totalreservoircapac bb capac totalreservoircapac reduc divis calc avg log line clear result creat bigger size buffer gc pool