df regionserv stuck heavi write load amp apo 3 node setup run datanod regionserv run hbase master hadoop namenod heavi write load java client client stuck stack trace regionserv show ipc server handler 46 60020 daemon prio 10 tid 0x4dd3f000 nid 0x4eb3 wait monitor entri 0x4cc82000 0x4cc83130 java lang thread state block object monitor org apach hadoop hbase regionserv hstore rowatorbeforefrommapfil hstore java 1424 wait lock lt 0x59d27ba0 gt org apach hadoop hbase regionserv hstorefil bloomfiltermapfil reader org apach hadoop hbase regionserv hstore getrowkeyatorbefor hstore java 1399 org apach hadoop hbase regionserv hregion getclosestrowbefor hregion java 1210 org apach hadoop hbase regionserv hregionserv getclosestrowbefor hregionserv java 1099 sun reflect generatedmethodaccessor12 invok unknown sourc sun reflect delegatingmethodaccessorimpl invok delegatingmethodaccessorimpl java 25 java lang reflect method invok method java 597 org apach hadoop hbase ipc hbaserpc server call hbaserpc java 438 org apach hadoop ipc server handler run server java 896 ipc server handler 43 60020 daemon prio 10 tid 0x4dd3bc00 nid 0x4eb0 wait monitor entri 0x4cd75000 0x4cd75fb0 java lang thread state block object monitor org apach hadoop hbase regionserv hstore rowatorbeforefrommapfil hstore java 1424 wait lock lt 0x59d27ba0 gt org apach hadoop hbase regionserv hstorefil bloomfiltermapfil reader org apach hadoop hbase regionserv hstore getrowkeyatorbefor hstore java 1399 org apach hadoop hbase regionserv hregion getclosestrowbefor hregion java 1210 org apach hadoop hbase regionserv hregionserv getclosestrowbefor hregionserv java 1099 sun reflect generatedmethodaccessor12 invok unknown sourc sun reflect delegatingmethodaccessorimpl invok delegatingmethodaccessorimpl java 25 java lang reflect method invok method java 597 org apach hadoop hbase ipc hbaserpc server call hbaserpc java 438 org apach hadoop ipc server handler run server java 896 ipc server handler 40 60020 daemon prio 10 tid 0x4dd38400 nid 0x4ead runnabl 0x4ce68000 0x4ce68e30 java lang thread state runnabl sun nio ch epollarraywrapp epollwait nativ method sun nio ch epollarraywrapp poll epollarraywrapp java 215 sun nio ch epollselectorimpl doselect epollselectorimpl java 65 sun nio ch selectorimpl lockanddoselect selectorimpl java 69 lock lt 0x6a557580 gt sun nio ch util 1 lock lt 0x6a557570 gt java util collect unmodifiableset lock lt 0x5cdcec18 gt sun nio ch epollselectorimpl sun nio ch selectorimpl select selectorimpl java 80 org apach hadoop net socketiowithtimeout selectorpool select socketiowithtimeout java 237 org apach hadoop net socketiowithtimeout doio socketiowithtimeout java 155 org apach hadoop net socketinputstream read socketinputstream java 149 org apach hadoop net socketinputstream read socketinputstream java 122 java io bufferedinputstream fill bufferedinputstream java 218 java io bufferedinputstream read bufferedinputstream java 237 lock lt 0x552ffb60 gt java io bufferedinputstream java io datainputstream readint datainputstream java 370 org apach hadoop df dfsclient blockread readchunk dfsclient java 928 lock lt 0x55300f78 gt org apach hadoop df dfsclient blockread org apach hadoop fs fsinputcheck readchecksumchunk fsinputcheck java 236 org apach hadoop fs fsinputcheck fill fsinputcheck java 178 org apach hadoop fs fsinputcheck read1 fsinputcheck java 195 org apach hadoop fs fsinputcheck read fsinputcheck java 159 lock lt 0x55300f78 gt org apach hadoop df dfsclient blockread org apach hadoop df dfsclient blockread read dfsclient java 823 lock lt 0x55300f78 gt org apach hadoop df dfsclient blockread org apach hadoop df dfsclient dfsinputstream readbuff dfsclient java 1352 lock lt 0x59a70e40 gt org apach hadoop df dfsclient dfsinputstream org apach hadoop df dfsclient dfsinputstream read dfsclient java 1388 lock lt 0x59a70e40 gt org apach hadoop df dfsclient dfsinputstream org apach hadoop df dfsclient dfsinputstream read dfsclient java 1337 lock lt 0x59a70e40 gt org apach hadoop df dfsclient dfsinputstream java io datainputstream readint datainputstream java 370 org apach hadoop io sequencefil reader readrecordlength sequencefil java 1847 lock lt 0x651f77b0 gt org apach hadoop io sequencefil reader org apach hadoop io sequencefil reader sequencefil java 1877 lock lt 0x651f77b0 gt org apach hadoop io sequencefil reader org apach hadoop io sequencefil reader sequencefil java 1782 lock lt 0x651f77b0 gt org apach hadoop io sequencefil reader org apach hadoop io mapfil reader seekintern mapfil java 476 lock lt 0x59d27ba0 gt org apach hadoop hbase regionserv hstorefil bloomfiltermapfil reader org apach hadoop io mapfil reader getclosest mapfil java 558 lock lt 0x59d27ba0 gt org apach hadoop hbase regionserv hstorefil bloomfiltermapfil reader org apach hadoop hbase regionserv hstore rowkeyfrommapfileemptykei hstore java 1463 org apach hadoop hbase regionserv hstore rowatorbeforefrommapfil hstore java 1434 lock lt 0x59d27ba0 gt org apach hadoop hbase regionserv hstorefil bloomfiltermapfil reader org apach hadoop hbase regionserv hstore getrowkeyatorbefor hstore java 1399 org apach hadoop hbase regionserv hregion getclosestrowbefor hregion java 1210 org apach hadoop hbase regionserv hregionserv getclosestrowbefor hregionserv java 1099 sun reflect generatedmethodaccessor12 invok unknown sourc sun reflect delegatingmethodaccessorimpl invok delegatingmethodaccessorimpl java 25 java lang reflect method invok method java 597 org apach hadoop hbase ipc hbaserpc server call hbaserpc java 438 org apach hadoop ipc server handler run server java 896 ipc server handler 38 60020 daemon prio 10 tid 0x4dd36000 nid 0x4eab wait monitor entri 0x4cf0a000 0x4cf0b130 java lang thread state block object monitor org apach hadoop hbase regionserv hstore rowatorbeforefrommapfil hstore java 1424 wait lock lt 0x59d27ba0 gt org apach hadoop hbase regionserv hstorefil bloomfiltermapfil reader org apach hadoop hbase regionserv hstore getrowkeyatorbefor hstore java 1399 org apach hadoop hbase regionserv hregion getclosestrowbefor hregion java 1210 org apach hadoop hbase regionserv hregionserv getclosestrowbefor hregionserv java 1099 sun reflect generatedmethodaccessor12 invok unknown sourc sun reflect delegatingmethodaccessorimpl invok delegatingmethodaccessorimpl java 25 java lang reflect method invok method java 597 org apach hadoop hbase ipc hbaserpc server call hbaserpc java 438 org apach hadoop ipc server handler run server java 896 ipc server handler 37 60020 daemon prio 10 tid 0x4dd35000 nid 0x4eaa wait monitor entri 0x4cf5b000 0x4cf5c0b0 java lang thread state block object monitor org apach hadoop hbase regionserv hstore rowatorbeforefrommapfil hstore java 1424 wait lock lt 0x59d27ba0 gt org apach hadoop hbase regionserv hstorefil bloomfiltermapfil reader org apach hadoop hbase regionserv hstore getrowkeyatorbefor hstore java 1399 org apach hadoop hbase regionserv hregion getclosestrowbefor hregion java 1210 org apach hadoop hbase regionserv hregionserv getclosestrowbefor hregionserv java 1099 sun reflect generatedmethodaccessor12 invok unknown sourc sun reflect delegatingmethodaccessorimpl invok delegatingmethodaccessorimpl java 25 java lang reflect method invok method java 597 org apach hadoop hbase ipc hbaserpc server call hbaserpc java 438 org apach hadoop ipc server handler run server java 896 ipc server handler 35 60020 daemon prio 10 tid 0x4dd32c00 nid 0x4ea8 wait monitor entri 0x4cffd000 0x4cffdfb0 java lang thread state block object monitor org apach hadoop hbase regionserv hstore rowatorbeforefrommapfil hstore java 1424 wait lock lt 0x59d27ba0 gt org apach hadoop hbase regionserv hstorefil bloomfiltermapfil reader org apach hadoop hbase regionserv hstore getrowkeyatorbefor hstore java 1399 org apach hadoop hbase regionserv hregion getclosestrowbefor hregion java 1210 org apach hadoop hbase regionserv hregionserv getclosestrowbefor hregionserv java 1099 sun reflect generatedmethodaccessor12 invok unknown sourc sun reflect delegatingmethodaccessorimpl invok delegatingmethodaccessorimpl java 25 java lang reflect method invok method java 597 org apach hadoop hbase ipc hbaserpc server call hbaserpc java 438 org apach hadoop ipc server handler run server java 896 ipc server handler 30 60020 daemon prio 10 tid 0x4dd2d400 nid 0x4ea3 wait monitor entri 0x4d192000 0x4d193130 java lang thread state block object monitor org apach hadoop hbase regionserv hstore rowatorbeforefrommapfil hstore java 1424 wait lock lt 0x59d27ba0 gt org apach hadoop hbase regionserv hstorefil bloomfiltermapfil reader org apach hadoop hbase regionserv hstore getrowkeyatorbefor hstore java 1399 org apach hadoop hbase regionserv hregion getclosestrowbefor hregion java 1210 org apach hadoop hbase regionserv hregionserv getclosestrowbefor hregionserv java 1099 sun reflect generatedmethodaccessor12 invok unknown sourc sun reflect delegatingmethodaccessorimpl invok delegatingmethodaccessorimpl java 25 java lang reflect method invok method java 597 org apach hadoop hbase ipc hbaserpc server call hbaserpc java 438 org apach hadoop ipc server handler run server java 896 ipc server handler 29 60020 daemon prio 10 tid 0x4dd2c000 nid 0x4ea2 wait monitor entri 0x4d1e3000 0x4d1e40b0 java lang thread state block object monitor org apach hadoop hbase regionserv hstore rowatorbeforefrommapfil hstore java 1424 wait lock lt 0x59d27ba0 gt org apach hadoop hbase regionserv hstorefil bloomfiltermapfil reader org apach hadoop hbase regionserv hstore getrowkeyatorbefor hstore java 1399 org apach hadoop hbase regionserv hregion getclosestrowbefor hregion java 1210 org apach hadoop hbase regionserv hregionserv getclosestrowbefor hregionserv java 1099 sun reflect generatedmethodaccessor12 invok unknown sourc sun reflect delegatingmethodaccessorimpl invok delegatingmethodaccessorimpl java 25 java lang reflect method invok method java 597 org apach hadoop hbase ipc hbaserpc server call hbaserpc java 438 org apach hadoop ipc server handler run server java 896 ipc server handler 26 60020 daemon prio 10 tid 0x4dd29800 nid 0x4e9f wait monitor entri 0x4d2d6000 0x4d2d6f30 java lang thread state block object monitor org apach hadoop hbase regionserv hstore rowatorbeforefrommapfil hstore java 1424 wait lock lt 0x59d27ba0 gt org apach hadoop hbase regionserv hstorefil bloomfiltermapfil reader org apach hadoop hbase regionserv hstore getrowkeyatorbefor hstore java 1399 org apach hadoop hbase regionserv hregion getclosestrowbefor hregion java 1210 org apach hadoop hbase regionserv hregionserv getclosestrowbefor hregionserv java 1099 sun reflect generatedmethodaccessor12 invok unknown sourc sun reflect delegatingmethodaccessorimpl invok delegatingmethodaccessorimpl java 25 java lang reflect method invok method java 597 org apach hadoop hbase ipc hbaserpc server call hbaserpc java 438 org apach hadoop ipc server handler run server java 896 ipc server handler 17 60020 daemon prio 10 tid 0x4dd1f800 nid 0x4e96 wait monitor entri 0x4d5af000 0x4d5afeb0 java lang thread state block object monitor org apach hadoop hbase regionserv hstore rowatorbeforefrommapfil hstore java 1424 wait lock lt 0x59d27ba0 gt org apach hadoop hbase regionserv hstorefil bloomfiltermapfil reader org apach hadoop hbase regionserv hstore getrowkeyatorbefor hstore java 1399 org apach hadoop hbase regionserv hregion getclosestrowbefor hregion java 1210 org apach hadoop hbase regionserv hregionserv getclosestrowbefor hregionserv java 1099 sun reflect generatedmethodaccessor12 invok unknown sourc sun reflect delegatingmethodaccessorimpl invok delegatingmethodaccessorimpl java 25 java lang reflect method invok method java 597 org apach hadoop hbase ipc hbaserpc server call hbaserpc java 438 org apach hadoop ipc server handler run server java 896 ipc server handler 14 60020 daemon prio 10 tid 0x4dd1c400 nid 0x4e93 wait monitor entri 0x4d6a2000 0x4d6a3130 java lang thread state block object monitor org apach hadoop hbase regionserv hstore rowatorbeforefrommapfil hstore java 1424 wait lock lt 0x59d27ba0 gt org apach hadoop hbase regionserv hstorefil bloomfiltermapfil reader org apach hadoop hbase regionserv hstore getrowkeyatorbefor hstore java 1399 org apach hadoop hbase regionserv hregion getclosestrowbefor hregion java 1210 org apach hadoop hbase regionserv hregionserv getclosestrowbefor hregionserv java 1099 sun reflect generatedmethodaccessor12 invok unknown sourc sun reflect delegatingmethodaccessorimpl invok delegatingmethodaccessorimpl java 25 java lang reflect method invok method java 597 org apach hadoop hbase ipc hbaserpc server call hbaserpc java 438 org apach hadoop ipc server handler run server java 896 ipc server handler 10 60020 daemon prio 10 tid 0x4dd17c00 nid 0x4e8f wait monitor entri 0x4d7e6000 0x4d7e6f30 java lang thread state block object monitor org apach hadoop hbase regionserv hstore rowatorbeforefrommapfil hstore java 1424 wait lock lt 0x59d27ba0 gt org apach hadoop hbase regionserv hstorefil bloomfiltermapfil reader org apach hadoop hbase regionserv hstore getrowkeyatorbefor hstore java 1399 org apach hadoop hbase regionserv hregion getclosestrowbefor hregion java 1210 org apach hadoop hbase regionserv hregionserv getclosestrowbefor hregionserv java 1099 sun reflect generatedmethodaccessor12 invok unknown sourc sun reflect delegatingmethodaccessorimpl invok delegatingmethodaccessorimpl java 25 java lang reflect method invok method java 597 org apach hadoop hbase ipc hbaserpc server call hbaserpc java 438 org apach hadoop ipc server handler run server java 896 ipc server handler 7 60020 daemon prio 10 tid 0x4dd14800 nid 0x4e8c wait monitor entri 0x4d8d9000 0x4d8da1b0 java lang thread state block object monitor org apach hadoop hbase regionserv hstore rowatorbeforefrommapfil hstore java 1424 wait lock lt 0x59d27ba0 gt org apach hadoop hbase regionserv hstorefil bloomfiltermapfil reader org apach hadoop hbase regionserv hstore getrowkeyatorbefor hstore java 1399 org apach hadoop hbase regionserv hregion getclosestrowbefor hregion java 1210 org apach hadoop hbase regionserv hregionserv getclosestrowbefor hregionserv java 1099 sun reflect generatedmethodaccessor12 invok unknown sourc sun reflect delegatingmethodaccessorimpl invok delegatingmethodaccessorimpl java 25 java lang reflect method invok method java 597 org apach hadoop hbase ipc hbaserpc server call hbaserpc java 438 org apach hadoop ipc server handler run server java 896 ipc server handler 0 60020 daemon prio 10 tid 0x4e2c0c00 nid 0x4e85 wait monitor entri 0x4db10000 0x4db10e30 java lang thread state block object monitor org apach hadoop hbase regionserv hstore rowatorbeforefrommapfil hstore java 1424 wait lock lt 0x59d27ba0 gt org apach hadoop hbase regionserv hstorefil bloomfiltermapfil reader org apach hadoop hbase regionserv hstore getrowkeyatorbefor hstore java 1399 org apach hadoop hbase regionserv hregion getclosestrowbefor hregion java 1210 org apach hadoop hbase regionserv hregionserv getclosestrowbefor hregionserv java 1099 sun reflect generatedmethodaccessor12 invok unknown sourc sun reflect delegatingmethodaccessorimpl invok delegatingmethodaccessorimpl java 25 java lang reflect method invok method java 597 org apach hadoop hbase ipc hbaserpc server call hbaserpc java 438 org apach hadoop ipc server handler run server java 896 regionserv log client stuck similar log client time point 2008 07 17 22 31 49 404 info org apach hadoop hbase regionserv hregion region aaa bbb 1216304670433 1145836031 2008 07 17 22 31 49 404 info org apach hadoop hbase regionserv hregion start compact region aaa bbb 1216304670433 2008 07 17 22 32 07 653 warn org apach hadoop hbase regionserv hstore close reader 1145836031 ccc java io ioexcept stream close org apach hadoop df dfsclient dfsinputstream close dfsclient java 1319 java io filterinputstream close filterinputstream java 155 org apach hadoop io sequencefil reader close sequencefil java 1581 org apach hadoop io mapfil reader close mapfil java 577 org apach hadoop hbase regionserv hstore closecompactionread hstore java 917 org apach hadoop hbase regionserv hstore compacthstorefil hstore java 910 org apach hadoop hbase regionserv hstore compact hstore java 787 org apach hadoop hbase regionserv hregion compactstor hregion java 887 org apach hadoop hbase regionserv hregion compactstor hregion java 847 org apach hadoop hbase regionserv compactsplitthread run compactsplitthread java 84 3 hstorefil compact 2008 07 17 22 32 07 912 info org apach hadoop hbase regionserv hregion compact complet region aaa bbb 1216304670433 18sec point regionserv rotat hlog activ 22 32 suspici log datanod 8min 2008 07 17 22 40 07 928 warn org apach hadoop df datanod 192 168 1 5650010 serv blk 38731635936101350 192 168 1 56 java net sockettimeoutexcept 480000 milli timeout wait channel readi write ch java nio channel socketchannel connect local 192 168 1 56 50010 remot 192 168 1 56 40691 org apach hadoop net socketiowithtimeout doio socketiowithtimeout java 170 org apach hadoop net socketoutputstream write socketoutputstream java 144 org apach hadoop net socketoutputstream write socketoutputstream java 105 java io bufferedoutputstream write bufferedoutputstream java 105 java io dataoutputstream write dataoutputstream java 90 org apach hadoop df datanod blocksend sendchunk datanod java 1784 org apach hadoop df datanod blocksend sendblock datanod java 1840 org apach hadoop df datanod dataxceiv readblock datanod java 1055 org apach hadoop df datanod dataxceiv run datanod java 984 java lang thread run thread java 619 block question found region time 2008 07 17 22 31 49 642 info org apach hadoop df datanod receiv block blk 38731635936101350 src 192 168 1 56 37878 dest 192 168 1 56 50010 2008 07 17 22 31 56 856 info org apach hadoop df datanod receiv block blk 38731635936101350 size 67108864 192 168 1 56 2008 07 17 22 31 56 857 info org apach hadoop df datanod packetrespond 1 block blk 38731635936101350 termin hbase client stuck found datanod send block regionserv block shown record stream close error small 4 node cluster trunk r675659 hadoop version 3 node cluster hbase trunk r677011 java lang nullpointerexcept org apach hadoop hbase client servercal getservernam servercal java 63 org apach hadoop hbase client hconnectionmanag tableserv getregionserverwithretri hconnectionmanag java 886 org apach hadoop hbase client htabl commit htabl java 1161 region server stuck 08 07 18 05 29 29 info ipc rpc problem connect server 192 168 1 56 60020 stack dump show similar amp apo df