add checkandput thrift api checkandput method thrift api easier atom updat cut thrift roundtrip common task