region apo state master open race condit region amp apo state exist multipl map regionmanag unassignedregion pendingregion regionstoclos closingregion regionstodelet race condit found hbase 534 hbase 0 1 patch hole find ultim solut requir lot hmaster appli hbase trunk propos solut creat class encapsul region amp apo state synchron access class valid state singl structur hold region transit state synchron collect kind