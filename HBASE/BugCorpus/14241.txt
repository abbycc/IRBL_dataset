fix deadlock cluster shutdown due concurr connect close caught test branch 1 0 shut testmastermetricswrapp found java level deadlock master meta server oper ip 10 32 130 237 55342 0 wait lock monitor 0x00007f2a040051c8 object 0x00000007e36108a8 org apach hadoop hbase util poolmap held 0 ip 10 32 130 237 55342 0 ip 10 32 130 237 55342 wait lock monitor 0x00007f2a04005118 object 0x00000007e3610b00 org apach hadoop hbase ipc rpcclientimpl connect held master meta server oper ip 10 32 130 237 55342 0 full stack dump deadlock debug output attach root rpcclientimpl close obtain lock connect synchron connect connect conn connect markclos obtain lock connect object conn isal conn markclos interruptedioexcept rpcclient close conn close thread metaservershutdownhandl call rpcclientimpl connect setupiostream markclos close lock connect object obtain lock connect attempt lead deadlock synchron connect connect removevalu remoteid