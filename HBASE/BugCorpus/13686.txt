fail limit rate ratelimit patch hbase 11598 found ratelimit amp apo limit rate time interv resourc execut param timestamp param lastt timestamp updat param amount number requir resourc return true resourc fals public synchron boolean canexecut final long final long lastt final long amount return gt amount true refil lastt gt amount gt amount amp apo refil time call canexecut lastt updat wast time refil smaller rate limit canexecut return fals